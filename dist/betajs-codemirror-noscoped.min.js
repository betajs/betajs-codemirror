/*!
betajs-codemirror - v1.0.7 - 2019-10-11
Copyright (c) Victor Lingenthal,Oliver Friedmann,Ibnu Triyono
Apache-2.0 Software License.
*/

(function(){var e=this.subScope();e.binding("module","global:BetaJS.Dynamics.Codemirror"),e.binding("base","global:BetaJS"),e.binding("dynamics","global:BetaJS.Dynamics"),e.define("module:",function(){return{guid:"ae5c3c39-efda-4c9a-a52f-d46fd494c9e0",version:"1.0.7",datetime:1570846242189}}),e.assumeVersion("base:version","~1.0.96"),e.assumeVersion("dynamics:version","~0.0.83"),e.define("module:Codemirror",["dynamics:Dynamic","base:Strings","base:Timers"],function(e,r,o,t){var i=e.extend({scoped:t},{template:"<div><textarea>{{value}}</textarea></div>",initial:{attrs:{language:"html",value:"",theme:"",readonly:!1,"auto-refresh":!1,trim:!1},types:{language:"string",value:"string",theme:"string",readonly:"boolean","auto-refresh":"boolean",trim:"boolean"},create:function(){this.initialContent&&this.set("value",this.initialContent),this.get("trim")!==undefined&&this.set("value",r.nltrim(this.get("value"))),this.on("change:readonly",function(e){this.codemirror.setOption("readOnly",e)},this),this.get("auto-refresh")!==undefined&&this.auto_destroy(new o.Timer({delay:100,fire:function(){this.call("refresh")},context:this}));var t=this.activeElement().getElementsByTagName("textarea")[0],e=this,i=this.cls.languages[this.get("language")]||{mode:this.get("language")};this.codemirror=CodeMirror(function(e){t.parentNode.replaceChild(e,t)},{value:this.get("value"),mode:i.mode,tabMode:"indent",readOnly:this.get("readonly"),highlightSelectionMatches:!0,autoCloseBrackets:!0,autoCloseTags:!0,lineNumbers:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor(),CodeMirror[i.fold])},"Ctrl-Space":function(e){CodeMirror.commands.autocomplete=function(e){CodeMirror.showHint(e,CodeMirror[i.hint])}}},foldGutter:!0,gutters:[i.gutters,"CodeMirror-linenumbers","CodeMirror-foldgutter"],lintWith:i.lint,theme:this.get("theme")}),this.codemirror.on("gutterClick",function(e,t){e.foldCode(t,CodeMirror[i.fold])}),this.codemirror.setSize("100%","100%"),this.__suppressUpdate=!1,this.codemirror.on("change",function(){e.__suppressUpdate=!0,e.set("value",e.codemirror.getValue()),e.__suppressUpdate=!1}),this.on("change:value",function(e){this.__suppressUpdate||this.codemirror.setValue(e)},this),this.codemirror.setSize("100%","100%")},functions:{format:function(){this.codemirror.autoFormatRange({line:0,ch:0},{line:this.codemirror.lineCount()-1,ch:null}),this.codemirror.setSelection({line:0,ch:0})},refresh:function(){this.codemirror&&this.codemirror.refresh()}}}},{languages:{html:{fold:"tagRangeFinder",mode:"text/html",hint:"htmlHint"},javascript:{fold:"braceRangeFinder",mode:"javascript",hint:"javascriptHint",gutters:"CodeMirror-lint-markers",lint:"javascriptValidator"},php:{fold:"tagRangeFinder",mode:"application/x-httpd-php",hint:"htmlHint"}}});return i.register("ba-codemirror"),i})}).call(Scoped);