/*!
betajs-codemirror - v1.0.5 - 2016-12-04
Copyright (c) Victor Lingenthal
Apache-2.0 Software License.
*/
(function(){var a=this.subScope();a.binding("module","global:BetaJS.Dynamics.Codemirror"),a.binding("base","global:BetaJS"),a.binding("dynamics","global:BetaJS.Dynamics"),a.binding("jquery","global:jQuery"),a.define("module:",function(){return{guid:"ae5c3c39-efda-4c9a-a52f-d46fd494c9e0",version:"25.1480901416503"}}),a.define("module:Codemirror",["dynamics:Dynamic","base:Strings","base:Timers","jquery:"],function(a,b,c,d,e){var f=a.extend({scoped:e},{template:"<div><textarea>{{value}}</textarea></div>",initial:{attrs:{language:"html",value:""},create:function(){this.initialContent&&this.set("value",this.initialContent),void 0!==this.get("trim")&&this.set("value",b.nltrim(this.get("value"))),this.set("readonly",!1),this.on("change:readonly",function(a){this.codemirror.setOption("readOnly",a)},this),void 0!==this.get("auto-refresh")&&this.auto_destroy(new c.Timer({delay:100,fire:function(){this.call("refresh")},context:this}));var a=d(this.element()).find("textarea").get(0),e=this,f=this.cls.languages[this.get("language")]||{mode:this.get("language")};this.codemirror=CodeMirror(function(b){a.parentNode.replaceChild(b,a)},{value:this.get("value"),mode:f.mode,tabMode:"indent",readOnly:this.get("readonly"),highlightSelectionMatches:!0,autoCloseBrackets:!0,autoCloseTags:!0,lineNumbers:!0,extraKeys:{"Ctrl-Q":function(a){a.foldCode(a.getCursor(),CodeMirror[f.fold])},"Ctrl-Space":function(a){CodeMirror.commands.autocomplete=function(a){CodeMirror.showHint(a,CodeMirror[f.hint])}}},foldGutter:!0,gutters:[f.gutters,"CodeMirror-linenumbers","CodeMirror-foldgutter"],lintWith:f.lint}),this.codemirror.on("gutterClick",function(a,b){a.foldCode(b,CodeMirror[f.fold])}),this.codemirror.setSize("100%","100%"),this.__suppressUpdate=!1,this.codemirror.on("change",function(){e.__suppressUpdate=!0,e.set("value",e.codemirror.getValue()),e.__suppressUpdate=!1}),this.on("change:value",function(a){this.__suppressUpdate||this.codemirror.setValue(a)},this),this.codemirror.setSize("100%","100%")},functions:{format:function(){this.codemirror.autoFormatRange({line:0,ch:0},{line:this.codemirror.lineCount()-1,ch:null}),this.codemirror.setSelection({line:0,ch:0})},refresh:function(){this.codemirror&&this.codemirror.refresh()}}}},{languages:{html:{fold:"tagRangeFinder",mode:"text/html",hint:"htmlHint"},javascript:{fold:"braceRangeFinder",mode:"javascript",hint:"javascriptHint",gutters:"CodeMirror-lint-markers",lint:"javascriptValidator"},php:{fold:"tagRangeFinder",mode:"application/x-httpd-php",hint:"htmlHint"}}});return f.register("ba-codemirror"),f})}).call(Scoped);