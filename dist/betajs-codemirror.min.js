/*!
betajs-codemirror - v1.0.9 - 2019-10-13
Copyright (c) Victor Lingenthal,Oliver Friedmann,Ibnu Triyono
Apache-2.0 Software License.
*/

var Scoped=function(){var u=function(){return{get:function(e){return"undefined"!=typeof window?e?window[e]:window:"undefined"!=typeof global?e?global[e]:global:"undefined"!=typeof self?e?self[e]:self:undefined},set:function(e,t){return"undefined"!=typeof window&&(window[e]=t),"undefined"!=typeof global&&(global[e]=t),"undefined"!=typeof self&&(self[e]=t),t},getPath:function(e){if(!e)return this.get();var t=e.split(".");if(1==t.length)return this.get(e);for(var n=this.get(t[0]),r=1;r<t.length;++r){if(!n)return n;n=n[t[r]]}return n},setPath:function(e,t){var n=e.split(".");if(1==n.length)return this.set(e,t);for(var r=this.get(n[0])||this.set(n[0],{}),a=1;a<n.length-1;++a)n[a]in r||(r[n[a]]={}),r=r[n[a]];return r[n[n.length-1]]=t}}}.call(this),f=function(){return{method:function(e,t){return function(){return t.apply(e,arguments)}},extend:function(e,t){for(var n in e=e||{},t=t||{})e[n]=t[n];return e},typeOf:function(e){return"[object Array]"===Object.prototype.toString.call(e)?"array":typeof e},isEmpty:function(e){if(null==e)return!0;if("array"==this.typeOf(e))return 0===e.length;if("object"!=typeof e)return!1;for(var t in e)return!1;return!0},matchArgs:function(e,t){var n=0,r={};for(var a in t)!0===t[a]||this.typeOf(e[n])==t[a]?(r[a]=e[n],n++):"undefined"==this.typeOf(e[n])&&n++;return r},stringify:function(e){return"function"==this.typeOf(e)?""+e:JSON.stringify(e)}}}.call(this),o=function(){return{__namespace:"Scoped",__revert:null,upgrade:function(e){var t=u.get(e||o.__namespace);if(t&&"object"==f.typeOf(t)&&t.guid==this.guid&&"string"==f.typeOf(t.version)){for(var n=this.version.split("."),r=t.version.split("."),a=!1,i=0;i<Math.min(n.length,r.length)&&(a=parseInt(n[i],10)>parseInt(r[i],10),n[i]==r[i]);++i);return a?this.attach(e):t}return this.attach(e)},attach:function(e){e&&(o.__namespace=e);var t=u.get(o.__namespace);if(t==this)return this;if(o.__revert=t)try{var n=t.__exportScoped();this.__exportBackup=this.__exportScoped(),this.__importScoped(n)}catch(r){}return u.set(o.__namespace,this),this},detach:function(e){return e&&u.set(o.__namespace,null),"undefined"!=typeof o.__revert&&u.set(o.__namespace,o.__revert),delete o.__revert,o.__exportBackup&&this.__importScoped(o.__exportBackup),this},exports:function(e,t,n){return"object"==typeof(e=e||("undefined"!=typeof module?module:null))&&e&&"exports"in e&&(n||e.exports==this||!e.exports||f.isEmpty(e.exports))&&(e.exports=t||this),this}}}.call(this);function m(e){var o={tree:"boolean"==typeof e.tree&&e.tree,global:"boolean"==typeof e.global&&e.global,root:"object"==typeof e.root?e.root:{}};function a(e){return{route:"string"==typeof e.route?e.route:null,parent:"object"==typeof e.parent?e.parent:null,ready:"boolean"==typeof e.ready&&e.ready,children:{},watchers:[],data:{},lazy:[]}}var s=a({ready:!0});if(o.tree)if(o.global){try{window&&(s.data=window)}catch(t){}try{global&&(s.data=global)}catch(t){}try{self&&(s.data=self)}catch(t){}}else s.data=o.root;function c(e){if(!e.ready)if(!e.parent||e.parent.ready){if(e.route&&e.parent&&e.route in e.parent.data){e.data=e.parent.data[e.route],e.ready=!0;for(var t=0;t<e.watchers.length;++t)e.watchers[t].callback.call(e.watchers[t].context||this,e.data);for(var n in e.watchers=[],e.children)c(e.children[n])}}else c(e.parent)}function i(e,t){if("object"==typeof t&&e.ready)for(var n in t)e.data[n]=t[n];else e.data=t;if("object"==typeof t)for(var r in t)e.children[r]&&(e.children[r].data=t[r]);for(var a in function i(e){if(!e.ready){e.parent&&!e.parent.ready&&i(e.parent),e.ready=!0,e.parent&&o.tree&&"object"==typeof e.parent.data&&(e.parent.data[e.route]=e.data);for(var t=0;t<e.watchers.length;++t)e.watchers[t].callback.call(e.watchers[t].context||this,e.data);e.watchers=[]}}(e),e.children)c(e.children[a])}function l(e){if(!e)return s;for(var t=e.split("."),n=s,r=0;r<t.length;++r)t[r]in n.children?n=n.children[t[r]]:(n.children[t[r]]=a({parent:n,route:t[r]}),c(n=n.children[t[r]]));return n}return{extend:function(e,t){i(l(e),t)},set:function(e,t){var n=l(e);n.data&&!function r(e){if(e.ready&&e.data)for(var t in e.data)delete e.data[t]}(n),i(n,t)},get:function(e){var t=l(e);return t.ready?t.data:null},lazy:function(e,t,n){var r=l(e);r.ready?t(n||this,r.data):r.lazy.push({callback:t,context:n})},digest:function(e){c(l(e))},obtain:function(e,t,n){!function a(e,t,n){if(e.ready)t.call(n||this,e.data);else if(e.watchers.push({callback:t,context:n}),0<e.lazy.length){var r=function(e){if(0<e.lazy.length){var t=e.lazy.shift();t.callback.call(t.context||this,e.data),r(e)}};r(e)}}(l(e),t,n)},unresolvedWatchers:function(e){return function i(e,t,n){for(var r in n=n||[],!(e=e||s).ready&&0===e.lazy.length&&0<e.watchers.length&&n.push(t),e.children){var a=e.children[r];n=i(a,(t?t+".":"")+a.route,n)}return n}(l(e),e)},__export:function(){return{options:o,nsRoot:s}},__import:function(e){o=e.options,s=e.nsRoot}}}var t=m({tree:!0,global:!0}),n=m({tree:!0}),r=function g(e,t,n,r){function a(i,o,s){function e(){this.require(c.dependencies,c.hiddenDependencies,function(){for(var e=[],t=0;t<arguments.length;++t)e.push(arguments[t]);if(e[e.length-1].ns=l,this.options.compile){for(var n=[],r=0;r<i.length;++r)n.push(f.stringify(i[r]));this.compiled+=this.options.ident+"."+o+"("+n.join(", ")+");\n\n"}this.options.dependencies&&(this.dependencies[l.path]=this.dependencies[l.path]||{},c.dependencies&&c.dependencies.forEach(function(e){this.dependencies[l.path][this.resolve(e).path]=!0},this),c.hiddenDependencies&&c.hiddenDependencies.forEach(function(e){this.dependencies[l.path][this.resolve(e).path]=!0},this));var a=this.options.compile?{}:c.callback.apply(c.context||this,e);s.call(this,l,a)},this)}var c=f.matchArgs(i,{options:"object",namespaceLocator:!0,dependencies:"array",hiddenDependencies:"array",callback:!0,context:"object"}),t=f.extend({lazy:this.options.lazy},c.options||{}),l=this.resolve(c.namespaceLocator);return t.lazy?l.namespace.lazy(l.path,e,this):e.apply(this),this}var i=null,o=[],s=t,c=n,l=r,p=m({tree:!0}),d=m({tree:!1}),h={global:{namespace:l},root:{namespace:c},local:{namespace:p},"default":{namespace:d},parent:{namespace:s},scope:{namespace:p,readonly:!1}};return{getGlobal:f.method(u,u.getPath),setGlobal:f.method(u,u.setPath),options:{lazy:!1,ident:"Scoped",compile:!1,dependencies:!1},compiled:"",dependencies:{},nextScope:function(){return i=i||g(this,p,c,l)},subScope:function(){var e=this.nextScope();return o.push(e),i=null,e},binding:function(e,t,n){var r;return h[e]&&h[e].readonly||(r="string"!=f.typeOf(t)?{namespace:m({tree:!0,root:t}),path:null}:this.resolve(t),h[e]=f.extend(n,r)),this},resolve:function(e){var t=e.split(":");if(1==t.length)throw"The locator '"+t[0]+"' requires a namespace.";var n=h[t[0]];if(!n)throw"The namespace '"+t[0]+"' has not been defined (yet).";return{namespace:n.namespace,path:n.path&&t[1]?n.path+"."+t[1]:n.path||t[1]}},define:function(){return a.call(this,arguments,"define",function(e,t){if(e.namespace.get(e.path))throw"Scoped namespace "+e.path+" has already been defined. Use extend to extend an existing namespace instead";e.namespace.set(e.path,t)})},assumeVersion:function(){var i=f.matchArgs(arguments,{assumption:!0,dependencies:"array",callback:!0,context:"object",error:"string"}),e=i.dependencies||[];e.unshift(i.assumption),this.require(e,function(){var e=arguments,t=e[0].replace(/[^\d\.]/g,"");e[0]=t.split(".");for(var n=0;n<e[0].length;++n)e[0][n]=parseInt(e[0][n],10);if("function"===f.typeOf(i.callback)){if(!i.callback.apply(i.context||this,i))throw"Scoped Assumption '"+i.assumption+"' failed, value is "+t+(i.error?", but assuming "+i.error:"")}else for(var r=(i.callback+"").replace(/[^\d\.]/g,"").split("."),a=0;a<Math.min(e[0].length,r.length);++a)if(parseInt(r[a],10)>e[0][a])throw"Scoped Version Assumption '"+i.assumption+"' failed, value is "+t+", but assuming at least "+i.callback})},extend:function(){return a.call(this,arguments,"extend",function(e,t){e.namespace.extend(e.path,t)})},require:function(){var t=f.matchArgs(arguments,{dependencies:"array",hiddenDependencies:"array",callback:"function",context:"object"});t.callback=t.callback||function(){};var e=t.dependencies||[],n=e.concat(t.hiddenDependencies||[]),r=n.length,a=[],i={};if(r){function o(e){this.i<a.length&&(a[this.i]=e),0==--r&&(a.push(i),t.callback.apply(t.context||this.ctx,a))}for(var s=0;s<n.length;++s){var c=this.resolve(n[s]);s<e.length&&a.push(null),c.namespace.obtain(c.path,o,{ctx:this,i:s})}}else a.push(i),t.callback.apply(t.context||this,a);return this},digest:function(e){var t=this.resolve(e);return t.namespace.digest(t.path),this},unresolved:function(e){var t=this.resolve(e);return t.namespace.unresolvedWatchers(t.path)},__export:function(){return{parentNamespace:s.__export(),rootNamespace:c.__export(),globalNamespace:l.__export(),localNamespace:p.__export(),privateNamespace:d.__export()}},__import:function(e){s.__import(e.parentNamespace),c.__import(e.rootNamespace),l.__import(e.globalNamespace),p.__import(e.localNamespace),d.__import(e.privateNamespace)}}}(0,n,n,t),e=f.extend(r,function(){return{guid:"4b6878ee-cb6a-46b3-94ac-27d91f58d666",version:"0.0.19",upgrade:o.upgrade,attach:o.attach,detach:o.detach,exports:o.exports,__exportScoped:function(){return{globalNamespace:t.__export(),rootNamespace:n.__export(),rootScope:r.__export()}},__importScoped:function(e){t.__import(e.globalNamespace),n.__import(e.rootNamespace),r.__import(e.rootScope)}}}.call(this));return(e=e.upgrade()).exports(),e}.call(this);(function(){var e=this.subScope();e.binding("module","global:BetaJS.Dynamics.Codemirror"),e.binding("base","global:BetaJS"),e.binding("dynamics","global:BetaJS.Dynamics"),e.define("module:",function(){return{guid:"ae5c3c39-efda-4c9a-a52f-d46fd494c9e0",version:"1.0.9",datetime:1570962701758}}),e.assumeVersion("base:version","~1.0.96"),e.assumeVersion("dynamics:version","~0.0.83"),e.define("module:Codemirror",["dynamics:Dynamic","base:Strings","base:Timers"],function(e,r,a,t){var n=e.extend({scoped:t},{template:"<div><textarea>{{value}}</textarea></div>",initial:{attrs:{language:"html",value:"",theme:"",readonly:!1,"auto-refresh":!1,trim:!1},types:{language:"string",value:"string",theme:"string",readonly:"boolean","auto-refresh":"boolean",trim:"boolean"},create:function(){this.initialContent&&this.set("value",this.initialContent),!1!==this.get("trim")&&this.set("value",r.nltrim(this.get("value"))),this.on("change:readonly",function(e){this.codemirror.setOption("readOnly",e)},this),!1!==this.get("auto-refresh")&&this.auto_destroy(new a.Timer({delay:100,fire:function(){this.call("refresh")},context:this}));var t=this.activeElement().getElementsByTagName("textarea")[0],e=this,n=this.cls.languages[this.get("language")]||{mode:this.get("language")};this.codemirror=CodeMirror(function(e){t.parentNode.replaceChild(e,t)},{value:this.get("value"),mode:n.mode,tabMode:"indent",readOnly:this.get("readonly"),highlightSelectionMatches:!0,autoCloseBrackets:!0,autoCloseTags:!0,lineNumbers:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor(),CodeMirror[n.fold])},"Ctrl-Space":function(e){CodeMirror.commands.autocomplete=function(e){CodeMirror.showHint(e,CodeMirror[n.hint])}}},foldGutter:!0,gutters:[n.gutters,"CodeMirror-linenumbers","CodeMirror-foldgutter"],lintWith:n.lint,theme:this.get("theme")}),this.codemirror.on("gutterClick",function(e,t){e.foldCode(t,CodeMirror[n.fold])}),this.codemirror.setSize("100%","100%"),this.__suppressUpdate=!1,this.codemirror.on("change",function(){e.__suppressUpdate=!0,e.set("value",e.codemirror.getValue()),e.__suppressUpdate=!1}),this.on("change:value",function(e){this.__suppressUpdate||this.codemirror.setValue(e)},this),this.codemirror.setSize("100%","100%")},functions:{format:function(){this.codemirror.autoFormatRange({line:0,ch:0},{line:this.codemirror.lineCount()-1,ch:null}),this.codemirror.setSelection({line:0,ch:0})},refresh:function(){this.codemirror&&this.codemirror.refresh()}}}},{languages:{html:{fold:"tagRangeFinder",mode:"text/html",hint:"htmlHint"},javascript:{fold:"braceRangeFinder",mode:"javascript",hint:"javascriptHint",gutters:"CodeMirror-lint-markers",lint:"javascriptValidator"},php:{fold:"tagRangeFinder",mode:"application/x-httpd-php",hint:"htmlHint"}}});return n.register("ba-codemirror"),n})}).call(Scoped);